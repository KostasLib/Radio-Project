!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var n=class{makeActive(){throw new Error("Method not implemented!")}makeIdle(){throw new Error("Method not implemented!")}killOtherActive(){throw new Error("Method not implemented!")}};const o=new WeakMap;var s=class extends n{constructor(e=""){super(),o.set(this,e)}makeActive(){this.hasID(),document.getElementById(this.id).classList.add("radio-item-active")}makeIdle(){this.hasID(),document.getElementById(this.id).classList.remove("radio-item-active")}killOtherActive(){this.hasID(),[...document.getElementsByClassName("radio-item-active")].forEach(e=>e.classList.remove("radio-item-active"))}hasID(){if(""===this.id)throw new Error("Set radioAnim.id equal to target radioItem.id first.")}set id(e){o.set(this,e)}get id(){return o.get(this)}};let r={};var a=class{constructor(){if(this.audio=document.querySelector("audio"),null===this.audio)throw new Error("No Audio element found on the DOM.")}play(){return this.audio.play()}pause(){return this.audio.pause()}set source(e){this.audio.src=e}get source(){return this.audio.src}set lastRadio(e){Object.assign(r,e)}get lastRadio(){return r}get volume(){return this.audio.volume}set volume(e){this.audio.volume=e}get muted(){return this.audio.muted}set muted(e){this.audio.muted=e}get paused(){return this.audio.paused}};var d=class extends n{makeActive(){document.getElementById("play-button").classList.add("play-button-active"),document.getElementById("play-button-wrapper").classList.add("play-button-wrapper-active")}makeIdle(){document.getElementById("play-button").classList.remove("play-button-active"),document.getElementById("play-button-wrapper").classList.remove("play-button-wrapper-active")}};function u(e=""){const t=document.getElementById("toast");t.innerHTML=e,t.classList.add("toast-visible"),setTimeout(()=>t.classList.remove("toast-visible"),2900)}var c=class{constructor(e,t,i,n,o){this.setProps(e),this.radioAnim=t,this.audio=i,this.buttonAnim=n,this.type=o,this.render().addEventListeners()}setProps(e){if(!this.isValid(e))throw new Error("A radioProps object must have .id, .name, .source and .img properties.");Object.assign(this,e)}isValid(e){return e.hasOwnProperty("id")&&e.hasOwnProperty("name")&&e.hasOwnProperty("img")&&e.hasOwnProperty("source")}render(){const e=document.createElement("div");e.setAttribute("class","radio-image"),e.style.backgroundImage=`url(${this.img})`;const t=document.createElement("li");return t.setAttribute("class","radio-item"),t.setAttribute("id",this.id),t.setAttribute("data-name",this.name),t.appendChild(e),document.getElementById(`${this.type}-radios`).appendChild(t),this}addEventListeners(){document.getElementById(this.id).addEventListener("mousedown",()=>{this.handleClick()})}handleClick(){this.updateAudioSource(),this.audio.paused?this.startAudio():this.pauseAudio(),console.log(`Player paused? ${this.audio.paused}`)}updateAudioSource(){this.audio.source!==this.source&&(this.audio.source=this.source,this.radioAnim.killOtherActive())}startAudio(){this.radioAnim.makeActive(),this.buttonAnim.makeActive(),this.audio.lastRadio=this,this.audio.play().then(this.buttonAnim.makeActive).catch(e=>{console.log(e),this.radioAnim.makeIdle(),this.buttonAnim.makeIdle(),u(`Failed to load ${this.name}`)})}pauseAudio(){this.radioAnim.makeIdle(),this.audio.pause(),this.buttonAnim.makeIdle()}};var l=class{constructor(e){this.render(e)}render(e){const t=document.createElement("h2"),i=e[0].toString().toUpperCase()+e.slice(1);t.innerHTML=`${i} Radios`;const n=document.createElement("ul");n.setAttribute("id",`${e}-radios`),n.setAttribute("class","radio-item-list");const o=document.createElement("section");o.setAttribute("id",`${e}-radios-section`),o.setAttribute("class","section-row"),o.appendChild(t),o.appendChild(n),document.getElementById("radio-sections-container").appendChild(o)}};function m(e){return new l(e)}function h(e,t){return new c(e,new s(e.id),new a,new d,t)}const p=new d,v=new a,y=new s;function f(){v.pause(),p.makeIdle(),y.makeIdle()}var b=function(){document.getElementById("play-button").addEventListener("mousedown",()=>{if(y.id=v.lastRadio.id,""===v.source)return u("Select a radio first!");v.paused?(p.makeActive(),y.makeActive(),v.play().catch(e=>{f(),console.log(e),u(`Can't load ${v.lastRadio.name}...`)})):f()})};const g=new a;function A(){g.volume=this.value/100}var w=function(){const e=document.getElementById("volume-bar");g.volume=.2,e.addEventListener("change",A),e.addEventListener("input",A),function(){const e=document.getElementById("volume-icon");e.addEventListener("click",()=>{g.muted?(g.muted=!1,e.innerHTML="volume_up"):(g.muted=!0,e.innerHTML="volume_off")})}()};!function(){const e=new XMLHttpRequest;e.open("GET","https://kostaslib.github.io/chillout/src/radios.json"),e.responseType="json",e.send(),e.onload=(()=>(function(e){const t=e.response;!function(e){const t=new a,i=Object.keys(e)[0],n=e[i][0];t.lastRadio=n,t.source=t.lastRadio.source}(t);for(let e in t)m(e),t[e].forEach(t=>h(t,e))})(e))}(),b(),w()}]);